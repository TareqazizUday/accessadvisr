{% load static %}
<section class="slider-section ">
    <div class="container text-center">
        <div class="row justify-content-center">
            <div class="col-lg-11">
                <div id="logoCarousel" class="carousel slide" data-bs-ride="carousel">
            <div class="carousel-inner">
                
                <div class="carousel-item active">
                    <div class="row align-items-center">
                        <div class="col-12 col-md-4">
                            <img src="{% static 'images/sponsor/genz.jpg' %}" alt="genz" class="img-fluid">
                            <p class="logo-caption">GenZ Marketing</p>
                        </div>
                        <div class="col-12 col-md-4">
                            <img src="{% static 'images/sponsor/horlix.jpg' %}" alt="horlix" class="img-fluid">
                            <p class="logo-caption">HeX Productions</p>
                        </div>
                        <div class="col-12 col-md-4">
                            <img src="{% static 'images/sponsor/pressalit.jpg' %}" alt="pressalit" class="img-fluid">
                            <p class="logo-caption">Pressalit</p>
                        </div>
                    </div>
                </div>

                <div class="carousel-item">
                    <div class="row align-items-center">
                        <div class="col-12 col-md-4">
                            <img src="{% static 'images/sponsor/genz.jpg' %}" alt="genz" class="img-fluid">
                            <p class="logo-caption">GenZ Marketing</p>
                        </div>
                        <div class="col-12 col-md-4">
                            <img src="{% static 'images/sponsor/horlix.jpg' %}" alt="horlix" class="img-fluid">
                            <p class="logo-caption">HeX Productions</p>
                        </div>
                        <div class="col-12 col-md-4">
                            <img src="{% static 'images/sponsor/pressalit.jpg' %}" alt="pressalit" class="img-fluid">
                            <p class="logo-caption">Pressalit</p>
                        </div>
                    </div>
                </div>

            </div>

            <button class="carousel-control-prev" type="button" data-bs-target="#logoCarousel" data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#logoCarousel" data-bs-slide="next">
                <span class="carousel-control-next-icon " aria-hidden="true"></span>
                <span class="visually-hidden">Next</span>
            </button>
        </div>
            </div>
        </div>
    </div>
</section>

<script>
// Restructure carousel for mobile to show 1 partner per slide
(function() {
    function restructureForMobile() {
        if (window.innerWidth > 767) return; // Only for mobile
        
        const carousel = document.getElementById('logoCarousel');
        if (!carousel || carousel.dataset.mobileRestructured === 'true') return;
        
        const carouselInner = carousel.querySelector('.carousel-inner');
        if (!carouselInner) return;
        
        // Collect all unique partners
        const partners = [];
        const items = carouselInner.querySelectorAll('.carousel-item');
        
        items.forEach((item, itemIndex) => {
            const cols = item.querySelectorAll('.col-12, .col-md-4');
            cols.forEach((col, colIndex) => {
                const img = col.querySelector('img');
                const caption = col.querySelector('.logo-caption');
                if (img && caption) {
                    // Check if partner already exists
                    const exists = partners.some(p => p.src === img.src);
                    if (!exists) {
                        partners.push({
                            src: img.src,
                            alt: img.alt,
                            caption: caption.textContent.trim(),
                            active: itemIndex === 0 && colIndex === 0
                        });
                    }
                }
            });
        });
        
        // Rebuild carousel with one partner per slide
        carouselInner.innerHTML = '';
        partners.forEach((partner, index) => {
            const newItem = document.createElement('div');
            newItem.className = 'carousel-item' + (partner.active || index === 0 ? ' active' : '');
            
            const newRow = document.createElement('div');
            newRow.className = 'row align-items-center justify-content-center';
            
            const newCol = document.createElement('div');
            newCol.className = 'col-12';
            
            const newImg = document.createElement('img');
            newImg.src = partner.src;
            newImg.alt = partner.alt;
            newImg.className = 'img-fluid';
            
            const newCaption = document.createElement('p');
            newCaption.className = 'logo-caption';
            newCaption.textContent = partner.caption;
            
            newCol.appendChild(newImg);
            newCol.appendChild(newCaption);
            newRow.appendChild(newCol);
            newItem.appendChild(newRow);
            carouselInner.appendChild(newItem);
        });
        
        carousel.dataset.mobileRestructured = 'true';
    }
    
    // Run on load
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', restructureForMobile);
    } else {
        restructureForMobile();
    }
})();
</script>

