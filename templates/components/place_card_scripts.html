<script>
// Function to handle phone number Show/Hide toggle
function attachPhoneShowHandlers() {
    document.querySelectorAll('.badge-show').forEach(function(button) {
        // Remove existing listeners to prevent duplicates
        button.replaceWith(button.cloneNode(true));
    });
    
    document.querySelectorAll('.badge-show').forEach(function(button) {
        button.addEventListener('click', function(e) {
            e.stopPropagation(); // Prevent card click
            const phoneSpan = this.previousElementSibling;
            const fullNumber = phoneSpan.getAttribute('data-full');
            
            if (this.textContent.trim() === 'Show') {
                // Show full number
                phoneSpan.textContent = fullNumber;
                this.textContent = 'Hide';
                this.style.background = '#28a745';
            } else {
                // Hide number
                const maskedNumber = fullNumber.substring(0, 10) + '***';
                phoneSpan.textContent = maskedNumber;
                this.textContent = 'Show';
                this.style.background = '#FF431E';
            }
        });
    });
}

// Function to handle card clicks for navigation
function attachCardClickHandlers() {
    document.querySelectorAll('.place-card').forEach(function(card) {
        card.addEventListener('click', function(e) {
            // Don't navigate if clicking on interactive elements
            if (e.target.closest('.badge-show') || 
                e.target.closest('.badge-heart') || 
                e.target.closest('a')) {
                return;
            }
            
            const url = this.getAttribute('data-url');
            if (url) {
                window.location.href = url;
            }
        });
    });
}

// Initialize handlers on page load
if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', function() {
        attachPhoneShowHandlers();
        attachCardClickHandlers();
    });
} else {
    attachPhoneShowHandlers();
    attachCardClickHandlers();
}
</script>
